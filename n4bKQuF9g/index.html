<!DOCTYPE html>
<html lang="zh-CN">
<head><meta charset="UTF-8">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>wonder&#39;s blog</title>
<link rel="shortcut icon" href="https://wonder-zhang.github.io/favicon.ico?v=1605704527269">
<link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
<link href="" rel="stylesheet">
<link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://wonder-zhang.github.io/media/css/prism-.css">
<style>
    @font-face {
        font-weight: normal;
        font-style: normal;
        font-family: 'charganolton';
        src: url('https://wonder-zhang.github.io/media/fonts/Charganolton.ttf');
    }
    @font-face {
        font-weight: normal;
        font-style: normal;
        font-family: 'JetBrainsMono';
        src: url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Regular.eot');
        src: url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Regular.eot?#iefix') format('embedded-opentype'),
        url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Regular.woff2') format('woff2'),
        url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Regular.woff') format('woff'),
        url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Regular.ttf') format('truetype');
    }

    @font-face {
        font-weight: bold;
        font-style: normal;
        font-family: 'JetBrainsMono';
        src: url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Bold.eot');
        src: url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Bold.eot?#iefix') format('embedded-opentype'),
        url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Bold.woff2') format('woff2'),
        url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Bold.woff') format('woff'),
        url('https://wonder-zhang.github.io/media/fonts/JetBrainsMono-Bold.ttf') format('truetype');
    }
</style>
<link rel="stylesheet" href="https://wonder-zhang.github.io/styles/main.css">

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    
</head>
<body>

<div class="header">
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="https://wonder-zhang.github.io">
                <img src="https://wonder-zhang.github.io/images/avatar.png?v=1605704527269" width="30" height="30"
                     class="d-inline-block align-top"
                     alt="">
                wonder&#39;s blog
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    
                        
                            <li class="nav-item active">
                                <a class="nav-link" href="/"
                                
                                >首页</a>
                            </li>
                        
                    
                        
                            <li class="nav-item active">
                                <a class="nav-link" href="/archives"
                                
                                >归档</a>
                            </li>
                        
                    
                        
                            <li class="nav-item active">
                                <a class="nav-link" href="/tags"
                                
                                >标签</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </nav>
</div>
<div id="content" class="container">
    <div class="row">
        <div class="col-sm-100 col-lg-9">
            <div class="shadow-sm post-detail">
                <article class="post i-card">
                    <h2 class="post-title">
                        termux安装网站实录
                    </h2>
                    <div class="post-info">
                        <time class="post-time">2020-08-23</time>
                        
                            <a href="https://wonder-zhang.github.io/HnnDbkxKC/" class="post-tag i-tag
                            i-tag-">
                                #web
                            </a>
                        
                            <a href="https://wonder-zhang.github.io/MlPEoUGcv/" class="post-tag i-tag
                            i-tag-banana">
                                #linux
                            </a>
                        
                    </div>
                    
                    <div class="post-content">
                        <p>用着ksweb觉得有点简单了，而且不知到为什么ksweb这个东西，只要你的ip换了之后，之前的所有东西都看不见啊了，重定向还是之前的ip，很无奈了索性用termux搞一个试试，正好实验实验自己的技术水了没有。<br>
为了图方便，直接<code>ssh</code>d手机连接电脑。</p>
<h1 id="数据库阶段">数据库阶段</h1>
<p>作为一个啥都没有的开始先<strong>安装数据库</strong><br>
<code>pkg install mariadb</code>（因为我一开始输入mysql的时候才发现自己没安装，呜呜呜）<br>
<strong>启动数据库</strong><br>
<code>nohup mysqld &amp;</code><br>
如果出[1]1715的时候就说明正常了，但凡出现一个error，那就卸载重装吧。17115就是mysql的pid号<br>
如果你想<strong>关闭mysql</strong>的话，输入这个命令就行</p>
<pre><code>kill -9 `pgrep mysql`
</code></pre>
<p>最新的termux的是包含两个用户的（我这个也是在安装wordpress的时候发现的，把我恶心到了）<br>
如果你尝试用root用户登录<code>mysql -u root</code>，会发现这货不让你登录。<br>
好吧接下来我也是百度找到的，<br>
<strong>登录 Termux 用户</strong><br>
<code>mysql -u $(whoami)</code></p>
<p><strong>修改 root 密码的 SQL语句</strong></p>
<p><code>use mysql;</code></p>
<pre><code>set password for 'root'@'localhost' = password('你设置的密码');
</code></pre>
<p><strong>刷新权限 并退出</strong><br>
<code>flush privileges;</code><br>
<code>exit；</code></p>
<p>然后再次<code>mysql -u root</code>尝试登录就行，期间输入你设置的密码。</p>
<h1 id="nginx阶段">nginx阶段</h1>
<p><strong>安装nginx</strong><br>
<code>pkg install nginx</code></p>
<p><strong>启动nginx</strong><br>
<code>nginx</code></p>
<p><strong>重启nginx</strong><br>
<code>nginx -s reload</code></p>
<p><strong>停止nginx</strong><br>
<code>nginx -s quit</code></p>
<p><strong>配置 Nginx</strong><br>
<code>vim $PREFIX/etc/nginx/nginx.conf</code></p>
<p>添加 index.php 到默认首页的规则里面</p>
<pre><code>server. {
listen 8080; 
server_ name localhost;
#charset koi8-r
#access_ log logs/host. access.1og main;
location / {
root /data/ data/ com. termux/ files/usr/ share/nginx/html; 
index index. html index. htm index. php;
}
</code></pre>
<p>取消 location ~ .php$ 这一端注释</p>
<pre><code>location ~\.php${
root html;
fastcgi_pass 127.0.0.1：9000；
fastcgi__index index.php；
fastcgi_param  SCRIPT_FILENAME/data/data/com.termux/files/usr/share/nginx/html$fastcgi_script_name；
include fastcgi_params；
</code></pre>
<p><strong>Termux 里面的 Nginx 默认网站的根目</strong>(wordoress也是在这里存放的。)<br>
/data/data/com.termux/files/usr/share/nginx/html</p>
<p><strong>完整的配置文件仅供参考：</strong></p>
<pre><code>worker_processes  1;
events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       8080;
        server_name  localhost;
        location / {
            root   /data/data/com.termux/files/usr/share/nginx/html;
            index  index.html index.htm index.php;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   /data/data/com.termux/files/usr/share/nginx/html;
        }

        location ~ \.php$ {
            root           html;
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param  SCRIPT_FILENAME  /data/data/com.termux/files/usr/share/nginx/html$fastcgi_script_name;
            include        fastcgi_params;
        }
    }
}
</code></pre>
<h1 id="php阶段">php阶段</h1>
<p><strong>安装php</strong><br>
<code>pkg install php</code></p>
<p><strong>安装 php-fpm</strong><br>
<code>pkg install php-fpm</code></p>
<p><strong>配置 php-fpm</strong><br>
<code>vim $PREFIX/etc/php-fpm.d/www.conf</code></p>
<p><strong>定位搜索</strong>（ <code>/</code>就是搜索）<code>listen =</code><strong>将</strong></p>
<pre><code>listen = /data/data/com.termux/files/usr/var/run/php-fpm.sock
</code></pre>
<p>换成</p>
<pre><code>listen = 127.0.0.1:9000
</code></pre>
<p>浏览器访问http://127.0.0.1:8080/info.php 测试新建的测试文件是否解析</p>
<h1 id="wordpress阶段">wordpress阶段</h1>
<p>新建wordpress数据库</p>
<pre><code>mysql -uroot -p你设置的密码 -e&quot;create database wordpress;show databases;&quot;
</code></pre>
<p>或者是<br>
<code>mysql -u root</code>登录之后<br>
<strong>查看数据库表</strong><br>
<code>show tables;</code><br>
<strong>建立wordpress数据库</strong><br>
<code>create database wondpres；</code><br>
再次查看一下，有wordpress的话就说明建立好了<br>
<strong>wget 下载 wordpress</strong><br>
wget https://cn.wordpress.org/wordpress-5.4-zh_CN.zip</p>
<p><strong>unzip 解压 wordpress 包</strong><br>
unzip wordpress-4.9.4-zh_CN.zip</p>
<p><strong>将解压的文件夹移动到 nginx 网站根目录下</strong><br>
mv wordpress/ $PREFIX/share/nginx/html</p>
<p>启动 php-fpm 和 Nginx<br>
<code>php-fpm</code><br>
<code>nginx</code></p>
<p>浏览器访问<code>127.0.0.1/wordpress/</code>或者是<code>你的ip/wordpress</code><br>
注意：有的人会在这一步出现什么连接到 <code>192.168.0.4:8080 时发生错误。SSL 接收到一个超出最大准许长度的记录</code>类似这样的报错，凡是涉及到ssl的看看你访问的是不是<br>
http://127.0.0.1/wordpress/<br>
有的会莫名其妙的自己成为了https</p>
<p>然后安装就行了，下面两个不用动，数据库名字wordpress用户root密码就是你设置的密码。</p>

                    </div>
                </article>
            </div>
            <div class="row">
                <div class="next-post col-6">
                    
                        <div class="next">上一篇</div>
                        <a href="https://wonder-zhang.github.io/PL2458i3a/">
                            <h3 class="post-title">
                                做一个“生性凉薄”的人，到底有多爽
                            </h3>
                        </a>
                    
                </div>
                <div class="next-post col-6">
                    
                        <div class="next">下一篇</div>
                        <a href="https://wonder-zhang.github.io/sFdvMpOKS/">
                            <h3 class="post-title">
                                aria2安装实录，利用termux实现高速下载
                            </h3>
                        </a>
                    
                </div>
            </div>
            
        </div>
        <div class="d-none d-lg-block col-lg-3">
            
                <div class="toc-card i-card shadow-sm sticky-top">
    <div class="toc-title i-card-title">目录</div>
    <div class="toc-content">
        <ul class="markdownIt-TOC">
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%98%B6%E6%AE%B5">数据库阶段</a></li>
<li><a href="#nginx%E9%98%B6%E6%AE%B5">nginx阶段</a></li>
<li><a href="#php%E9%98%B6%E6%AE%B5">php阶段</a></li>
<li><a href="#wordpress%E9%98%B6%E6%AE%B5">wordpress阶段</a></li>
</ul>

    </div>
    <script>
        function locateCatelogList() {
            /*获取文章目录集合,可通过:header过滤器*/
            var alis = $('.post-content :header');
            /*获取侧边栏目录列表集合**/
            var sidebar_alis = $('.markdownIt-TOC a');
            /*获取滚动条到顶部的距离*/
            var scroll_height = $(window).scrollTop();
            for (var i = 0; i < alis.length; i++) {
                /*获取锚点集合中的元素分别到顶点的距离*/
                var a_height = $(alis[i]).offset().top-150;
                if (a_height < scroll_height) {
                    /*高亮显示*/
                    sidebar_alis.removeClass('on');
                    $(sidebar_alis[i]).addClass('on');
                }
            }
        }

        $(function () {
            /*绑定滚动事件 */
            $(window).bind('scroll', locateCatelogList);
        });
    </script>
</div>

            
        </div>
    </div>
    <div class="site-footer">
    Powered by <a href="https://www.wonder1999.com" target="_blank">wonder</a>
 <a class="rss" href="https://wonder-zhang.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a> | Theme <a href="//github.com/violetfreesia/gridea-theme-Violet" target="_blank">Violet</a>
</div>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <script src="https://wonder-zhang.github.io/media/js/main.js"></script>















</div>


</body>
</html>